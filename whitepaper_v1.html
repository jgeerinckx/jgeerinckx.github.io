<!-- Chosen Palette: Warm Neutrals (Slate/Stone) with a professional Blue accent and Amber/Gold for value. -->
<!-- Application Structure Plan: I've designed a thematic, tab-based Single Page Application (SPA) structure. Instead of a linear document, users navigate between distinct sections (Dashboard, Core Loops, Simulator, Guilds, Tokenomics) using JavaScript-driven navigation. This is superior for usability as users can explore systems non-linearly. The key interactions are the "Miner Simulator" and "Facility Simulator," which use JS to dynamically calculate the "Difficulty-Driven Obsolescence" (Sec 6/Appendix) and "Facility Cost Scaling" (Sec 8) based on user-selected inputs, making the report's most complex concepts tangible and easy to grasp. -->
<!-- Visualization & Content Choices: 
- Dashboard ($MINE$ vs $CREDIT$): Goal: Compare. Viz: Two-column HTML/Tailwind card layout for quick comparison of token properties (Sec 1).
- Miner Progression: Goal: Show Change. Viz: Chart.js Logarithmic Line Chart to visualize the 20-generation scaling of Price vs. Efficiency (Sec 4). Interaction: None (static chart).
- Miner Simulator: Goal: Interact/Simulate. Viz: HTML Dropdown (Gen 1-20) and Slider (Difficulty 1-100). Interaction: JS 'onchange' event recalculates all energy formulas from the Technical Appendix (Sec 14.2) and updates text outputs.
- Facility Simulator: Goal: Interact/Simulate. Viz: HTML Dropdown (5 Facilities) and Slider (Difficulty 1-30). Interaction: JS 'onchange' event recalculates Facility Cost using the formula from Sec 8: Cost = Base * (0.6 + 0.08D).
- Tokenomics Flow: Goal: Organize. Viz: HTML/Tailwind flow diagrams (using flexbox and borders) to visualize the MINE->CREDIT arbitrage and CREDIT sinks (Sec 9, 17, 18, 19).
- Guild Rules: Goal: Inform. Viz: HTML/Tailwind icon-based "rule cards" to highlight the 5% cap, 3% tax, and cooldowns (Sec 2, 13).
-->
<!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Mining Initiative - Interactive Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f1f5f9; /* slate-100 */
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 48rem; /* max-w-2xl */
            margin-left: auto;
            margin-right: auto;
            height: 350px;
            max-height: 400px;
        }
        .pane {
            display: none;
        }
        .pane.active {
            display: block;
        }
        .nav-btn {
            @apply px-4 py-2 font-medium text-slate-600 rounded-md transition-colors;
        }
        .nav-btn.active {
            @apply bg-blue-600 text-white shadow-lg;
        }
        .stat-card {
            @apply bg-white p-6 rounded-xl shadow-lg transition-all hover:shadow-xl;
        }
        .token-card {
            @apply bg-white p-6 rounded-xl shadow-lg flex flex-col h-full;
        }
        .rule-card {
            @apply bg-white p-6 rounded-lg shadow-md flex items-center space-x-4;
        }
        .flow-box {
            @apply bg-white p-4 rounded-lg shadow-md text-center font-semibold text-slate-700;
        }
        .flow-arrow {
            @apply text-slate-500 font-bold text-2xl;
        }
    </style>
</head>
<body class="text-slate-800">

    <div class="container mx-auto p-4 md:p-8 max-w-7xl">
        
        <header class="mb-8">
            <h1 class="text-4xl font-bold text-slate-900">The Mining Initiative</h1>
            <p class="text-xl text-slate-600 mt-2">Interactive Economic Dashboard & Simulator</p>
        </header>

        <nav class="mb-8 bg-white p-2 rounded-xl shadow-md flex flex-wrap items-center justify-center gap-2">
            <button class="nav-btn active" data-pane="dashboard">üìä Dashboard</button>
            <button class="nav-btn" data-pane="loops">üîÑ Core Loops</button>
            <button class="nav-btn" data-pane="simulator">‚öôÔ∏è Miner Simulator</button>
            <button class="nav-btn" data-pane="guilds">üõ°Ô∏è Guilds & Facilities</button>
            <button class="nav-btn" data-pane="tokenomics">üí∞ Tokenomics</button>
        </nav>

        <main>
            <!-- Dashboard Pane -->
            <div id="dashboard" class="pane active space-y-8">
                <section>
                    <h2 class="text-3xl font-semibold mb-4 text-slate-900">Economic Overview</h2>
                    <p class="text-lg text-slate-600 mb-6 max-w-3xl">
                        This dashboard summarizes the dual-token economy of The Mining Initiative. The system is built on a clear division of purpose: $MINE$ as the fixed-supply reward token and $CREDIT$ as the high-velocity utility token.
                    </p>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div class="token-card border-t-4 border-amber-500">
                            <h3 class="text-3xl font-bold text-amber-600 mb-4">ü™ô $MINE$</h3>
                            <p class="text-lg font-semibold text-slate-700 mb-4">The Reward & Governance Token</p>
                            <ul class="space-y-3 text-slate-600 flex-grow">
                                <li class="flex items-start"><span class="mr-3 mt-1">üì¶</span><strong>Fixed Supply:</strong> 210,000,000 $MINE$ total.</li>
                                <li class="flex items-start"><span class="mr-3 mt-1">üèÜ</span><strong>Acquisition:</strong> Earned via winner-takes-all block rewards.</li>
                                <li class="flex items-start"><span class="mr-3 mt-1">üî•</span><strong>Deflationary Sinks:</strong>
                                    <ul class="list-disc pl-5 mt-1">
                                        <li>1% Guild Tax on all pool wins.</li>
                                        <li>Burn-to-Mint Arbitrage Engine.</li>
                                    </ul>
                                </li>
                                <li class="flex items-start"><span class="mr-3 mt-1">‚öñÔ∏è</span><strong>Core Utility:</strong> Burned to mint $CREDIT$ when $CREDIT$ price > $1.05.</li>
                            </ul>
                            <p class="mt-6 text-sm font-medium text-slate-500 pt-4 border-t border-slate-200">
                                $MINE$ is the value-accrual asset of the ecosystem.
                            </p>
                        </div>
                        <div class="token-card border-t-4 border-blue-600">
                            <h3 class="text-3xl font-bold text-blue-700 mb-4">üíµ $CREDIT$</h3>
                            <p class="text-lg font-semibold text-slate-700 mb-4">The Utility & Operations Token</p>
                            <ul class="space-y-3 text-slate-600 flex-grow">
                                <li class="flex items-start"><span class="mr-3 mt-1">üîÑ</span><strong>Supply:</strong> Elastic; minted by burning $MINE$ or via HBD bootstrap.</li>
                                <li class="flex items-start"><span class="mr-3 mt-1">üéØ</span><strong>Soft Peg:</strong> Economically anchored to ~$1.00 USD.</li>
                                <li class="flex items-start"><span class="mr-3 mt-1">‚öôÔ∏è</span><strong>Constant Sinks (Burned on use):</strong>
                                    <ul class="list-disc pl-5 mt-1">
                                        <li>NFT Miner Purchases</li>
                                        <li>Daily Energy Costs</li>
                                        <li>Research Funding</li>
                                        <li>Guild & Market Fees</li>
                                        <li>Miner Scrapping Reward</li>
                                    </ul>
                                </li>
                                <li class="flex items-start"><span class="mr-3 mt-1">üìà</span><strong>Peg Mechanic:</strong> Arbitrage ceiling at $1.05 (burn $MINE$ to mint).</li>
                            </ul>
                            <p class="mt-6 text-sm font-medium text-slate-500 pt-4 border-t border-slate-200">
                                $CREDIT$ is the high-velocity fuel that powers the game.
                            </p>
                        </div>
                    </div>
                </section>
            </div>

            <!-- Core Loops Pane -->
            <div id="loops" class="pane space-y-8">
                <section>
                    <h2 class="text-3xl font-semibold mb-4 text-slate-900">Core Game Loops</h2>
                    <p class="text-lg text-slate-600 mb-6 max-w-3xl">
                        Gameplay is driven by three interconnected systems: Mining for rewards, managing Energy costs, and funding Research to unlock new technology.
                    </p>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                        <div class="stat-card">
                            <h3 class="text-2xl font-semibold mb-3">Mining & Emission</h3>
                            <p class="text-slate-600">Miners compete for block rewards in a winner-takes-all system. This creates a high-variance, high-reward environment for solo players and encourages pooling in guilds.</p>
                            <ul class="mt-4 space-y-2 text-sm">
                                <li><strong>Block Time:</strong> 1 minute</li>
                                <li><strong>Initial Reward:</strong> Calculated at launch.</li>
                                <li><strong>Halving:</strong> Occurs every 10,512,000 blocks (~6 mo).</li>
                            </ul>
                        </div>
                        <div class="stat-card md:col-span-2">
                            <h3 class="text-2xl font-semibold mb-3">Energy System v2: Dynamic Consumption</h3>
                            <p class="text-slate-600">The energy system ensures active participation by tying the energy burn rate directly to network Difficulty ($D$). This forces players to monitor their farm like a real PoW operation.</p>
                            <ul class="mt-4 space-y-2 text-sm">
                                <li class="flex items-center"><span class="text-blue-500 font-bold mr-2 text-lg">1.</span> <strong>Centralized Account Buffer:</strong> All miners in a farm draw energy from a single, unified account supply.</li>
                                <li class="flex items-center"><span class="text-blue-500 font-bold mr-2 text-lg">2.</span> <strong>Purchase Limit:</strong> You can only buy enough energy for the next **24 hours** of runtime at the current $D$.</li>
                                <li class="flex items-center"><span class="text-blue-500 font-bold mr-2 text-lg">3.</span> <strong>Max Buffer:</strong> The system enforces a maximum stockpile of **48 hours** of runtime.</li>
                                <li class="flex items-center"><span class="text-blue-500 font-bold mr-2 text-lg">4.</span> <strong>Hourly Check-In:</strong> Energy is consumed (deducted) during a mandatory **hourly check-in** on the account.</li>
                                <li class="flex items-center"><span class="text-blue-500 font-bold mr-2 text-lg">5.</span> <strong>Dynamic Burn:</strong> If $D$ rises between check-ins, your remaining energy is consumed faster to pay the higher operational cost, shortening your runtime.</li>
                            </ul>
                        </div>
                        <div class="stat-card">
                            <h3 class="text-2xl font-semibold mb-3">Hybrid Research</h3>
                            <p class="text-slate-600">New miner generations are unlocked via a global research effort, split 50/50. Player-funded rewards are scaled by how much of the goal is met, with unused portions going to the Treasury.</p>
                             <ul class="mt-4 space-y-2 text-sm">
                                <li><strong>50% Auto-Research:</strong> Guarantees minimum progression time.</li>
                                <li><strong>50% Player-Funded:</strong> Burn $CREDIT$ to accelerate.</li>
                                <li><strong>Reward:</strong> Scaled % of future $NFT$ sales.</li>
                            </ul>
                        </div>
                    </div>
                </section>
            </div>

            <!-- Simulator Pane -->
            <div id="simulator" class="pane space-y-8">
                <section>
                    <h2 class="text-3xl font-semibold mb-4 text-slate-900">Miner Simulator (Energy)</h2>
                    <p class="text-lg text-slate-600 mb-6 max-w-3xl">
                        See the "Difficulty-Driven Obsolescence" in action. Select a miner generation and a network Difficulty ($D$) to see the exact daily energy cost. This simulation uses the detailed formulas from the Technical Appendix (Sec 14.2) to show how older miners are penalized more heavily by rising Difficulty.
                    </p>
                    
                    <div class="stat-card mb-8">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <label for="gen-select" class="block text-sm font-medium text-slate-700">1. Select Miner Generation</label>
                                <select id="gen-select" class="mt-1 block w-full pl-3 pr-10 py-2 text-base border-slate-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md shadow-sm">
                                    <!-- Options populated by JS -->
                                </select>
                            </div>
                            <div>
                                <label for="diff-slider" class="block text-sm font-medium text-slate-700">2. Set Network Difficulty (D): <span id="sim-diff-value" class="font-bold">1</span></label>
                                <input id="diff-slider" type="range" min="1" max="10" value="1" class="mt-2 block w-full">
                            </div>
                        </div>

                        <div class="mt-8 border-t border-slate-200 pt-6">
                            <h4 class="text-xl font-semibold mb-4 text-center">Simulation Results</h4>
                            <div class="grid grid-cols-2 lg:grid-cols-4 gap-4 text-center">
                                <div class="bg-slate-100 p-4 rounded-lg">
                                    <div class="text-sm text-slate-500">Price ($CREDIT$)</div>
                                    <div id="sim-price" class="text-2xl font-bold text-blue-700"></div>
                                </div>
                                <div class="bg-slate-100 p-4 rounded-lg">
                                    <div class="text-sm text-slate-500">Efficiency (Hash)</div>
                                    <div id="sim-eff" class="text-2xl font-bold text-slate-800"></div>
                                </div>
                                <div class="bg-slate-100 p-4 rounded-lg">
                                    <div class="text-sm text-slate-500">Base Energy / Day</div>
                                    <div id="sim-ebase" class="text-2xl font-bold text-slate-800"></div>
                                </div>
                                <div class="bg-amber-100 p-4 rounded-lg border border-amber-300">
                                    <div class="text-sm text-amber-900">Final Energy / Day ($CREDIT$)</div>
                                    <div id="sim-energy-final" class="text-2xl font-bold text-amber-700"></div>
                                </div>
                            </div>
                            <p id="sim-conclusion" class="mt-4 text-center text-slate-600"></p>
                        </div>
                    </div>
                </section>

                <section>
                    <h2 class="text-3xl font-semibold mb-4 text-slate-900">Generational Scaling (Logarithmic)</h2>
                    <p class="text-lg text-slate-600 mb-6 max-w-3xl">
                        This chart visualizes the exponential scaling of $NFT$ Miner Price (1.5x) vs. Efficiency (1.67x) across all 20 generations, as detailed in Section 4.
                    </p>
                    <div class="stat-card">
                        <div class="chart-container">
                            <canvas id="miner-progression-chart"></canvas>
                        </div>
                    </div>
                </section>
            </div>

            <!-- Guilds Pane -->
            <div id="guilds" class="pane space-y-8">
                <section>
                    <h2 class="text-3xl font-semibold mb-4 text-slate-900">Guilds & Anti-Whale Rules</h2>
                    <p class="text-lg text-slate-600 mb-6 max-w-3xl">
                        Guilds (mining pools) are crucial for stability, and these strict rules prevent centralization while allowing flexible team formation and rewarding solo play.
                    </p>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                        <div class="rule-card">
                            <span class="text-4xl">üõ°Ô∏è</span>
                            <div>
                                <h3 class="text-xl font-semibold">5% Effective Hash Cap</h3>
                                <p class="text-slate-600">A guild's effective hashpower is capped at 5% of the network total. This prevents monopolies and guarantees competition.</p>
                            </div>
                        </div>
                        <div class="rule-card">
                            <span class="text-4xl">üî•</span>
                            <div>
                                <h3 class="text-xl font-semibold">3% Guild Tax</h3>
                                <p class="text-slate-600">Guild wins are taxed 3%: 1% of $MINE$ is burned (deflation) and 2% goes to the Guild Treasury. Solo miners pay 0% tax.</p>
                            </div>
                        </div>
                        <div class="rule-card">
                            <span class="text-4xl">‚åõ</span>
                            <div>
                                <h3 class="text-xl font-semibold">24hr Cooldowns</h3>
                                <p class="text-slate-600">A 24hr "Join Cooldown" (no rewards) and "Leave Cooldown" (no re-joining) prevents all pool-hopping exploits.</p>
                            </div>
                        </div>
                    </div>
                </section>

                <section>
                    <h2 class="text-3xl font-semibold mb-4 text-slate-900">Facility Simulator (Cost)</h2>
                    <p class="text-lg text-slate-600 mb-6 max-w-3xl">
                        Guilds can purchase temporary facilities using $CREDIT$. The cost scales with network Difficulty ($D$) to ensure they are accessible in the early-game and prestigious in the late-game.
                    </p>
                    
                    <div class="stat-card mb-8">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <label for="facility-select" class="block text-sm font-medium text-slate-700">1. Select Facility</label>
                                <select id="facility-select" class="mt-1 block w-full pl-3 pr-10 py-2 text-base border-slate-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md shadow-sm">
                                    <!-- Options populated by JS -->
                                </select>
                            </div>
                            <div>
                                <label for="facility-diff-slider" class="block text-sm font-medium text-slate-700">2. Set Network Difficulty (D): <span id="facility-diff-value" class="font-bold">1</span></label>
                                <input id="facility-diff-slider" type="range" min="1" max="10" value="1" class="mt-2 block w-full">
                            </div>
                        </div>

                        <div class="mt-8 border-t border-slate-200 pt-6">
                            <h4 class="text-xl font-semibold mb-4 text-center">Simulation Results</h4>
                            <div class="grid grid-cols-1 md:grid-cols-3 gap-4 text-center">
                                <div class="bg-slate-100 p-4 rounded-lg">
                                    <div class="text-sm text-slate-500">Base Cost (at D=5)</div>
                                    <div id="sim-facility-base" class="text-2xl font-bold text-slate-800"></div>
                                </div>
                                <div class="bg-slate-100 p-4 rounded-lg">
                                    <div class="text-sm text-slate-500">Cost Multiplier</div>
                                    <div id="sim-facility-multi" class="text-2xl font-bold text-slate-800"></div>
                                </div>
                                <div class="bg-blue-100 p-4 rounded-lg border border-blue-300">
                                    <div class="text-sm text-blue-900">Final Cost ($CREDIT$)</div>
                                    <div id="sim-facility-final" class="text-2xl font-bold text-blue-700"></div>
                                </div>
                            </div>
                            <p id="sim-facility-conclusion" class="mt-4 text-center text-slate-600"></p>
                        </div>
                    </div>
                </section>
            </div>

            <!-- Tokenomics Pane -->
            <div id="tokenomics" class="pane space-y-8">
                <section>
                    <h2 class="text-3xl font-semibold mb-4 text-slate-900">Tokenomic Flow</h2>
                    <p class="text-lg text-slate-600 mb-6 max-w-3xl">
                        The economy is driven by two key flows: the $MINE$-to-$CREDIT$ arbitrage engine and the perpetual $CREDIT$ burn sinks.
                    </p>
                    
                    <h3 class="text-2xl font-semibold mb-4 text-slate-800">1. The Arbitrage Engine (Peg Stability)</h3>
                    <div class="stat-card mb-8">
                        <div class="flex flex-col md:flex-row items-center justify-center gap-4 flex-wrap">
                            <div class="flow-box bg-red-100 text-red-800 border border-red-200">
                                $CREDIT$ Price > $1.05
                            </div>
                            <div class="flow-arrow">‚Üí</div>
                            <div class="flow-box">
                                Player burns $MINE$
                            </div>
                            <div class="flow-arrow">‚Üí</div>
                            <div classs="flow-box">
                                Mints $CREDIT$ at $1.00
                            </div>
                            <div class="flow-arrow">‚Üí</div>
                             <div class="flow-box bg-green-100 text-green-800 border border-green-200">
                                $CREDIT$ Price returns to ~$1.00
                            </div>
                        </div>
                        <p class="text-center mt-4 text-slate-600">This action provides a hard ceiling for $CREDIT$ and creates a permanent, non-speculative demand for $MINE$.</p>
                    </div>

                    <h3 class="text-2xl font-semibold mb-4 text-slate-800">2. The $CREDIT$ Burn Sinks (Utility Demand)</h3>
                    <div class="stat-card">
                         <div class="flex flex-col md:flex-row items-center justify-center gap-4 flex-wrap">
                            <div class="flow-box">
                                Player (needs to play)
                            </div>
                            <div class="flow-arrow">‚Üí</div>
                            <div class="flow-box bg-blue-100 text-blue-800 border border-blue-200">
                                Buys/Mints $CREDIT$
                            </div>
                            <div class="flow-arrow">‚Üí</div>
                            <div class="flex flex-col gap-2">
                                <div class="flow-box text-sm">NFT Purchases</div>
                                <div class="flow-box text-sm">Daily Energy</div>
                                <div class="flow-box text-sm">Research</div>
                                <div class="flow-box text-sm">Guild Facilities</div>
                                <div class="flow-box text-sm">Miner Scrapping</div>
                            </div>
                            <div class="flow-arrow">‚Üí</div>
                             <div class="flow-box bg-red-100 text-red-800 border border-red-200">
                                $CREDIT$ is BURNED
                            </div>
                        </div>
                        <p class="text-center mt-4 text-slate-600">All key actions burn $CREDIT$, removing it from circulation. This constant demand is what pulls the $CREDIT$ price up, triggering the $MINE$ arbitrage burn.</p>
                    </div>
                </section>
            </div>
        </main>

    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            
            const GENERATION_DATA = [
                { gen: 1, price: 25.00, eff: 1.00, eBase: 0.010 },
                { gen: 2, price: 37.50, eff: 1.67, eBase: 0.015 },
                { gen: 3, price: 56.25, eff: 2.79, eBase: 0.023 },
                { gen: 4, price: 84.38, eff: 4.66, eBase: 0.034 },
                { gen: 5, price: 126.56, eff: 7.78, eBase: 0.051 },
                { gen: 6, price: 189.84, eff: 12.98, eBase: 0.077 },
                { gen: 7, price: 284.77, eff: 21.64, eBase: 0.115 },
                { gen: 8, price: 427.16, eff: 36.05, eBase: 0.173 },
                { gen: 9, price: 640.74, eff: 60.32, eBase: 0.259 },
                { gen: 10, price: 961.11, eff: 100.73, eBase: 0.389 },
                { gen: 11, price: 1441.66, eff: 168.22, eBase: 0.584 },
                { gen: 12, price: 2162.49, eff: 280.91, eBase: 0.876 },
                { gen: 13, price: 3243.73, eff: 469.12, eBase: 1.314 },
                { gen: 14, price: 4865.60, eff: 783.42, eBase: 1.971 },
                { gen: 15, price: 7298.40, eff: 1308.30, eBase: 2.957 },
                { gen: 16, price: 10947.60, eff: 2186.87, eBase: 4.435 },
                { gen: 17, price: 16421.40, eff: 3656.07, eBase: 6.652 },
                { gen: 18, price: 24632.10, eff: 6120.64, eBase: 9.978 },
                { gen: 19, price: 36948.20, eff: 10241.47, eBase: 14.968 },
                { gen: 20, price: 55422.30, eff: 17142.25, eBase: 22.451 }
            ];

            const FACILITY_DATA = [
                { id: 'cooling', name: 'Cooling Station (-3% Energy)', baseCost: 3200 },
                { id: 'predictive', name: 'Predictive Hub (D-Spike Warning)', baseCost: 2600 },
                { id: 'buffer', name: 'Buffer Extender (+8-12h)', baseCost: 3600 },
                { id: 'research', name: 'Research Accelerator (+5-8%)', baseCost: 2800 },
                { id: 'reserve', name: 'Emergency Reserve (12h Refill)', baseCost: 3000 }
            ];

            const navButtons = document.querySelectorAll('.nav-btn');
            const panes = document.querySelectorAll('.pane');

            navButtons.forEach(btn => {
                btn.addEventListener('click', () => {
                    const paneId = btn.dataset.pane;
                    
                    panes.forEach(pane => {
                        pane.classList.remove('active');
                    });
                    document.getElementById(paneId).classList.add('active');

                    navButtons.forEach(navBtn => {
                        navBtn.classList.remove('active');
                    });
                    btn.classList.add('active');
                });
            });

            const genSelect = document.getElementById('gen-select');
            const diffSlider = document.getElementById('diff-slider');
            const diffValueText = document.getElementById('sim-diff-value');
            
            const simPrice = document.getElementById('sim-price');
            const simEff = document.getElementById('sim-eff');
            const simEBase = document.getElementById('sim-ebase');
            const simEnergyFinal = document.getElementById('sim-energy-final');
            const simConclusion = document.getElementById('sim-conclusion');

            const facilitySelect = document.getElementById('facility-select');
            const facilityDiffSlider = document.getElementById('facility-diff-slider');
            const facilityDiffValue = document.getElementById('facility-diff-value');
            
            const simFacilityBase = document.getElementById('sim-facility-base');
            const simFacilityMulti = document.getElementById('sim-facility-multi');
            const simFacilityFinal = document.getElementById('sim-facility-final');
            const simFacilityConclusion = document.getElementById('sim-facility-conclusion');


            function populateDropdowns() {
                GENERATION_DATA.forEach(gen => {
                    const option = document.createElement('option');
                    option.value = gen.gen;
                    option.textContent = `Generation ${gen.gen}`;
                    genSelect.appendChild(option);
                });

                FACILITY_DATA.forEach(facility => {
                    const option = document.createElement('option');
                    option.value = facility.id;
                    option.textContent = facility.name;
                    facilitySelect.appendChild(option);
                });
            }

            function updateSimulator() {
                const g = parseInt(genSelect.value);
                const D = parseInt(diffSlider.value);
                diffValueText.textContent = D;

                const miner = GENERATION_DATA[g - 1];

                const sensitivity = 1 - 0.8 * (g - 1) / 19;
                const D_eff = Math.min(Math.sqrt(D), 3.16);
                const finalEnergy = miner.eBase * (1 + sensitivity * (D_eff - 1));

                simPrice.textContent = miner.price.toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 });
                simEff.textContent = miner.eff.toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 });
                simEBase.textContent = miner.eBase.toFixed(4);
                simEnergyFinal.textContent = finalEnergy.toFixed(4);

                if (g < 10 && D > 50) {
                    simConclusion.textContent = "Notice: At this high difficulty, this older miner's energy cost is scaling rapidly, forcing an upgrade.";
                } else if (g > 18) {
                    simConclusion.textContent = "Notice: This high-gen miner is very resistant to difficulty, keeping energy costs low.";
                } else {
                    simConclusion.textContent = "This cost is moderate, but will increase as Difficulty rises.";
                }
            }

            function updateFacilitySimulator() {
                const facilityId = facilitySelect.value;
                const D = parseInt(facilityDiffSlider.value);
                facilityDiffValue.textContent = D;

                const facility = FACILITY_DATA.find(f => f.id === facilityId);
                const multiplier = 0.6 + 0.08 * D;
                const finalCost = facility.baseCost * multiplier;

                simFacilityBase.textContent = facility.baseCost.toLocaleString();
                simFacilityMulti.textContent = multiplier.toFixed(2) + 'x';
                simFacilityFinal.textContent = finalCost.toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 });

                if (D <= 3) {
                    simFacilityConclusion.textContent = "At this low Difficulty, the facility is discounted to encourage early guild formation.";
                } else if (D > 15) {
                    simFacilityConclusion.textContent = "At high Difficulty, the facility is a prestigious and expensive strategic asset.";
                } else {
                    simFacilityConclusion.textContent = "This is a standard mid-game cost.";
                }
            }

            function initMinerChart() {
                const ctx = document.getElementById('miner-progression-chart').getContext('2d');
                new Chart(ctx, {
                    type: 'line',
                    data: {
                        labels: GENERATION_DATA.map(g => `Gen ${g.gen}`),
                        datasets: [
                            {
                                label: 'Price ($CREDIT$)',
                                data: GENERATION_DATA.map(g => g.price),
                                borderColor: '#2563eb', // blue-600
                                backgroundColor: '#bfdbfe', // blue-200
                                yAxisID: 'yPrice',
                                tension: 0.1
                            },
                            {
                                label: 'Efficiency (Hash)',
                                data: GENERATION_DATA.map(g => g.eff),
                                borderColor: '#f59e0b', // amber-500
                                backgroundColor: '#fef3c7', // amber-100
                                yAxisID: 'yEff',
                                tension: 0.1
                            }
                        ]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        interaction: {
                            mode: 'index',
                            intersect: false,
                        },
                        scales: {
                            x: {
                                title: { display: true, text: 'Miner Generation' }
                            },
                            yPrice: {
                                type: 'logarithmic',
                                position: 'left',
                                title: { display: true, text: 'Price (Log Scale)' },
                                grid: {
                                    drawOnChartArea: false,
                                },
                            },
                            yEff: {
                                type: 'logarithmic',
                                position: 'right',
                                title: { display: true, text: 'Efficiency (Log Scale)' }
                            }
                        },
                        plugins: {
                            tooltip: {
                                callbacks: {
                                    label: function(context) {
                                        let label = context.dataset.label || '';
                                        if (label) {
                                            label += ': ';
                                        }
                                        if (context.parsed.y !== null) {
                                            label += context.parsed.y.toLocaleString();
                                        }
                                        return label;
                                    }
                                }
                            }
                        }
                    }
                });
            }
            
            if (document.getElementById('miner-progression-chart')) {
                initMinerChart();
            }

            if(genSelect) {
                populateDropdowns();
                updateSimulator();
                updateFacilitySimulator();

                genSelect.addEventListener('change', updateSimulator);
                diffSlider.addEventListener('input', updateSimulator);
                
                facilitySelect.addEventListener('change', updateFacilitySimulator);
                facilityDiffSlider.addEventListener('input', updateFacilitySimulator);
            }
        });
    </script>
</body>
</html>